<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shoe-catalogue</title>
    <script src="shoes.js" defer></script>
    <!-- ***** ALPINE ***** -->
    <script src="//unpkg.com/alpinejs" defer></script>
    <!-- ***** ALPINE ***** -->
    <!-- ***** AXIOS ***** -->
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
    <!-- ***** AXIOS ***** -->
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="user-forms.css" />
    <link
      rel="shortcut icon"
      href="./images/favicon1.ico"
      type="image/x-icon"
    />
    <style>
      [x-cloak] {
        display: none;
      }
    </style>
  </head>

  <body x-data="shoeapi">
    <!-- Navbar -->
    <header>
      <!-- Nav -->
      <nav class="nav container">
        <!-- logo -->
        <a href="#" class="logo">Lubabalo's KicksðŸ‘Ÿ</a>
        <div class="nav-links-wrapper">
          <ul class="nav-links">
            <li><a href="#hero">Home</a></li>
            <li><a href="#shop">Shop now</a></li>
            <li
              x-on:click="showSignUpScreen()"
              x-bind:class="activeuser ? 'hidden': ''"
            >
              Sign in
            </li>
            <li x-on:click="signOut()" x-bind:class="activeuser ? '': 'hidden'">
              Sign out
            </li>
          </ul>
        </div>
        <!-- cart -->
        <div class="nav">
          <i
            class="bx bx-shopping-bag"
            id="cart-icon"
            x-bind:data-quantity="itemsInCart"
            x-on:click="openCart"
          ></i>
        </div>
        <div class="cart" x-bind:class="showCart ? 'active': '' ">
          <h2 class="cart-title">Your Cart</h2>
          <!-- content -->
          <div>
            <!-- cart template -->
            <template x-for="shoe in cartShoes">
              <div class="cart-box">
                <img x-bind:src="shoe.image_url" alt="" class="cart-img" />
                <div class="detail-box">
                  <div x-text="shoe.name" class="cart-shoe-name"></div>
                  <div>
                    R <span x-text="shoe.total" class="cart-price"></span>
                  </div>
                  <!-- <input type="number" class="cart-quantity" value="1" /> -->
                  <div>
                    <i
                      class="bx bx-plus-circle add-shoe-qty"
                      x-on:click="addShoeOnCart(shoe.shoe_id)"
                    ></i>
                    <span x-text="shoe.qty"></span>
                    <i
                      class="bx bx-minus-circle minus-shoe-qty"
                      x-on:click="minusShoeQty(shoe.shoe_id)"
                    ></i>
                  </div>
                </div>
                <!-- remove item icon -->
                <i
                  class="bx bx-trash-alt cart-remove"
                  x-on:click="deleteShoeFromCart(shoe.shoe_id)"
                ></i>
              </div>
            </template>
            <!-- cart template -->
          </div>
          <!-- total -->
          <div class="total">
            <div class="total-title">Total</div>
            <div>R<span x-text="cartTotal" class="total-price"></span></div>
          </div>
          <!-- buy button -->
          <button class="btn-buy" type="button" x-on:click="showPaymentBtn">
            Checkout
          </button>
          <!-- close cart -->
          <i class="bx bx-x" id="close-cart" x-on:click="closeCart"></i>
          <div class="payment-wrapper" x-show="paymentBtn">
            <input
              type="number"
              placeholder="R 14 000"
              class="amount-input"
              x-ref="pays"
            />
            <button
              type="button"
              class="btn-pay"
              x-on:click="cartPayment($refs.pays.value), $refs.pays.value=''"
            >
              Pay
            </button>
          </div>
        </div>
      </nav>
    </header>
    <!-- ******************** HERO SECTION ******************** -->
    <section id="hero">
      <div>
        <img
          src="https://www.hydraulicsstores.co.za/wp-content/uploads/2024/01/6-1.png"
          alt=""
        />
      </div>
    </section>
    <!-- ******************** HERO SECTION ******************** -->

    <!-- shoes -->
    <section id="shop">
      <!-- Shop Content -->
      <h2 class="section-title">Shoe Catalogue</h2>
      <div class="shoes-wrapper container">
        <!-- FLITERS -->
        <article>
          <!-- Brand Filter-->
          <div class="filter-brand">
            <label for="select-brand">Filter By Brand</label>
            <select
              name="shoes"
              id="brand-select"
              x-model="brand"
              @change="handleChange"
            >
              <option value="">Select Brand</option>
              <option value="Moschino">Moschino</option>
              <option value="Zanotti">Zanotti</option>
              <option value="Philipp Plein">Philipp Plein</option>
              <option value="Naked Wolfe">Naked Wolfe</option>
            </select>
          </div>

          <!-- Size Filter-->
          <div class="filter-size">
            <label for="select-size">Filter By Size</label>
            <select
              name="shoes"
              id="size-select"
              x-model="size"
              @change="handleChange"
            >
              <option value="">Select Size</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
            </select>
          </div>

          <!-- Color Filter -->
          <div class="filter-color">
            <label for="select-color">Filter By Color</label>
            <select
              name="shoes"
              id="select-color"
              x-model="color"
              @change="handleChange"
            >
              <option value="">Select Color</option>
              <option value="Black">Black</option>
              <option value="Brown">Brown</option>
              <option value="White">White</option>
            </select>
          </div>
        </article>
        <div class="shop-content">
          <template x-for="shoe in shoes">
            <div class="shoe-box">
              <img
                x-bind:src="shoe.image_url"
                data-img="shoe.image_url"
                alt=""
                class="shoe-img"
              />
              <h4 x-text="shoe.brand" class="shoe-brand"></h4>
              <span x-text="shoe.color" class="shoe-color"></span>
              <h2 x-text="shoe.name" class="shoe-name"></h2>
              <span class="price"
                >R <span x-text="shoe.new_price" class="price"></span
              ></span>
              <p class="shoe-size">
                size : <span x-text="shoe.size" class="shoe-size"></span>
              </p>
              <p
                class="shoe-quantity"
                x-bind:class="shoe.quantity < warning  ? 'danger': ''"
              >
                in stock :
                <span x-text="shoe.quantity" class="shoe-quantity"></span>
              </p>
              <i
                x-bind:class="shoe.quantity < 1  ? 'hidden': ''"
                class="bx bx-shopping-bag add-cart"
                x-on:click="addShoeOnCart(shoe.id),showSignUpScreen()"
              ></i>
            </div>
          </template>
        </div>
      </div>
    </section>

    <!-- ******************** SIGN UP FORM  ******************** -->
    <div class="modal" x-show="signUpScreen" x-cloak>
      <button class="btn--close-modal" x-on:click="closeForm">&times;</button>
      <h2 class="modal-header">Sign up</h2>
      <p class="error-msg" x-text="signUpErrors">Invalid mail</p>
      <form class="modal-form">
        <label>Email Address</label>
        <input type="email" x-ref="email" placeholder="enter email" />
        <label>Password</label>
        <input type="password" x-ref="password" placeholder="enter password" />
        <!-- <button class="btn" ><a href="signin.html">Sign up &rarr;</a></button> -->
        <button
          type="button"
          class="btn"
          x-on:click="
          email=$refs.email.value,
          password=$refs.password.value,
          signUp(email, password), 
          $refs.email.value = '', 
          $refs.password.value= ''
          "
        >
          Sign up &rarr;
        </button>
        <p class="sign-up-text">
          Already have an acccount ?
          <span
            ><button type="button" x-on:click="showSignInScreen">
              sign in
            </button></span
          >
        </p>
      </form>
    </div>
    <div class="overlay" x-show="signUpScreen"></div>
    <!-- ******************** SIGN UP FORM  ******************** -->

    <!-- ******************** SIGN IN FORM  ******************** -->
    <div class="modal" x-show="signInScreen" x-cloak>
      <button class="btn--close-modal" x-on:click="closeForm">&times;</button>
      <h2 class="modal-header">Sign inðŸ“²</h2>
      <form class="modal-form">
        <label>Email Address</label>
        <input type="email" x-ref="emailLogin" placeholder="enter email" />
        <label>Password</label>
        <input type="text" x-ref="passwordLogin" placeholder="enter password" />
        <button
          type="button"
          class="btn"
          x-on:click="
          emailLogin=$refs.emailLogin.value,
          passwordLogin=$refs.passwordLogin.value,
          signIn(emailLogin, passwordLogin), 
          $refs.emailLogin.value = '', 
          $refs.passwordLogin.value= ''
          "
        >
          Sign in &rarr;
        </button>
        <p class="sign-in-text">
          don't have an acccount ?
          <span x-on:click="showSignUpScreen"><button>signup</button></span>
        </p>
      </form>
    </div>
    <!-- ******************** SIGN IN FORM  ******************** -->
    <!-- ******************** FOOTER SECTION ******************** -->
    <footer>
      <div class="container">
        <p>You can find us at:</p>
        <span
          >Eastgate Shopping Centre, Shop U153, Johannesburg, 43 Bradford Rd,
          Bedfordview, Johannesburg, 2008</span
        >
        <span>| Phone: 011 622 2711</span>
        <div class="footer-wrapper">
          <small>&copy LUBABALO 2024</small>
          <a href="index.html">LUBABALO</a>
        </div>
      </div>
    </footer>
  </body>
</html>
